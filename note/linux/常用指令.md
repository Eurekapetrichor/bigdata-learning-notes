

---
# 1. `uptime`
显示系统的运行时间以及系统在过去 1 分钟、5 分钟和 15 分钟内的平均负载。等同于 `top` 命令的第一行。

```bash
[root@jz-desktop-02 ~]# uptime
 23:35:41 up 44 days,  4:41,  3 users,  load average: 0.59, 0.56, 0.63
```
- `23:35:41`: 当前时间;
- ` up 44 days,  4:41`: 系统运行了 44天4小时41分钟;
- `3 users`: 当前有3个用户登录;
- `load average: 0.59, 0.56, 0.63`: 系统在过去的 1 分钟、5 分钟和 15 分钟内的平均负载。

常用选项
```bash
-p, --pretty
 采用可读友好的格式输出系统已运行时长
-h, --help
 显示帮助信息
-s, --since
 以格式 yyyy-mm-dd HH:MM:SS format 输出系统启动时间
-V, --version
 显示版本信息
```

- `-p`:
    ```bash
    [root@jz-desktop-02 ~]# uptime -p
    up 6 weeks, 2 days, 4 hours, 42 minutes
    ```
- `-s`:
    ```bash
    [root@jz-desktop-02 ~]# uptime -s
    2023-06-25 18:54:12
    ```
  
什么是系统平均负载
> 系统平均负载指单位时间内, 系统中处于 可运行状态 和 不可中断状态的进程数,也就是 平均活跃进程数, 它和 cpu使用率 没有直接的关系.

可运行状态的进程
> 指正在使用 cpu 或正在等待使用 cpu 的进程, 也就是 ps 命令看到的, 处于 R状态(Running or Runnable) 的进程.

不可中断状态的进程
> 指正在等待某些 I/O 的进程, 也就是 ps 命令看到的 D状态(Uninterruptible Sleep, 也称为 Disk Sleep)的进程。 例如等待磁盘 I/O, 当一个进程向磁盘读写数据时, 为了保证数据的一致性, 在得到磁盘回复前, 它是不能被其他进程打断的, 这个时候的进程就处于不可中断状态. 如果此时的进程被打断了, 就容易出现磁盘数据与进程数据不一致的问题。 所以, 不可中断状态实际上是系统对进程和硬件设备的一种保护机制。

系统平均负载多少时合理
> uptime 命令给出的三个时间段的平均负载并不是标准化的, 因为系统中的 cpu 核心数量是不定的. 所以平均负载为 1 意味着拥有 一个cpu核心 的系统一直在忙碌, 而在一个拥有 四个cpu核心 的系统上, 以为着系统 75% 的时间是空闲的。
> 
> 所以，当 系统平均负载 除以 cpu核心数 小于等于1，表示系统没有出现过载的情况。最理想的情况是 每个cpu上都刚好运行一个进程，这样 cpu 就得到了充分的利用。





















